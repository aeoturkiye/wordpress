"use strict";jQuery(document).ready((function(e){if(!e||void 0===e)return console.log("[ModalWindow] No jQuery library detected. Load ModalWindow after jQuery has been loaded on the page.");if(e.fn.ModalWindow=function(t){const n={overlay:!0,blockPage:!0,action:["load",0],scrolled:[0,"px"],animation:["no",400,"no",400],closeBtn:[!1,0],autoClose:[!1,5],closeAction:[!1,!1],video:[!1,!1,!1],screenMax:[!1,1024],screenMin:[!1,480],mobile:[480,85,"%"],floatBtnAnimation:[!1,"no",5,"has-animation",5],cookie:[!1,0,"cookie-name","open"],closeRedirect:[!1,"",""],triggers:["modal-open","modal-close","close-btn"],openSelectors:"",closeSelectors:"",byURL:[!1,"popup=active"],referrer:[!1,""],hash:[!1,"#"],trackingOpen:[!1,"Modal Open","Modal Window","",""],trackingClose:[!1,"Modal Close","Modal Window","",""],geotargeting:!1,countries:["UA"],style:{},closeForm:3};return this.each((function(){const o=e.extend(!0,{},n,t),i=this,c=e(this).children(".modal-window__wrapper"),r=e(c).children(".modal-window__content"),a=e(i).children(".modal-float-button"),s=e(i).find(".modal-window__form"),l=e(i).find(".wpcf7, form.wpforms-form"),d=e(window).width(),u=(e(window).height(),e(r).find(".modal-window__content-box"));let f,m="";const h=function(){let t=e(r).find('iframe[src*="youtube.com"]'),n=e(r).find('iframe[src*="vimeo.com"]');return t.length>0?t:n.length>0&&n}();function p(){let e=1e3*parseInt(o.closeForm);setTimeout((function(){M()}),e)}function g(e="open"){if(!o.cookie[0])return;if(e!==o.cookie[3])return;let t=parseFloat(o.cookie[1]),n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3),document.cookie=t>0?o.cookie[2]+"=yes; path=/; expires="+n.toGMTString():o.cookie[2]+"=yes; path=/;"}function w(e){const t=e[0];let n={};return n[e[1]]=e[2],"scale"===t&&(n.percent=1),{type:t,options:n}}async function k(){let e=[];if(e.push(!(!0===o.screenMax[0]&&o.screenMax[1]<d||!0===o.screenMin[0]&&o.screenMin[1]>d)),e.push(function(){if(!o.byURL[0])return!0;const e=o.byURL[1].split("="),t=e[0],n=e[1];return new URLSearchParams(document.location.search).get(t)===n}()),e.push(!o.referrer[0]||""===o.referrer[1]||document.referrer.includes(o.referrer[1])),e.push(!1===o.hash[0]||!!window.location.hash.includes(o.hash[1])),e.push(function(){if(!o.cookie[0])return!0;const e=decodeURIComponent(document.cookie).split(";");for(let t=0;t<e.length;t++)if(0===e[t].trim().indexOf(o.cookie[2]+"="))return!1;return!0}()),o.geotargeting){const t=await new Promise(((e,t)=>{fetch("https://get.geojs.io/v1/ip/country.json").then((e=>e.json())).then((t=>{o.countries.includes(t.country)?e(!0):e(!1)})).catch((t=>{console.error("Error:",t),e(!1)}))}));e.push(t)}return e.every((e=>!0===e))}function y(){!function(){if(o.video[0]&&o.video[1]&&h){let t=e(h).attr("src");e(h).attr("src",t+"?autoplay=1")}}(),function(){let t=e('link[rel="https://api.w.org/"]');if(u.length&&t.length){const n=t.attr("href"),o=e(u).attr("data-title")?"1":"0",i=m.split("/").filter(Boolean).pop(),c=`${n}wp/v2/${e(u).attr("data-post-type")?e(u).attr("data-post-type"):"posts"}?slug=${i}`;e.get(c,(function(t){if(t.length){const n=t[0];let i="";"1"===o&&(i+="<h2>"+n.title.rendered+"</h2>"),i+=n.content.rendered,e(u).html(i)}}))}}(),o.closeBtn[0]||function(){const t=1e3*parseInt(o.closeBtn[1]);setTimeout((function(){e(r).find(".modal-window__close").fadeIn()}),t)}(),!0===o.autoClose[0]&&function(){let e=1e3*parseInt(o.autoClose[1]);setTimeout((function(){M()}),e)}(),e(a).length&&e(a).addClass("is-paused"),g("open"),function(){if(!o.trackingOpen[0])return!1;if("function"!=typeof window.gtag)return!1;const e=o.trackingOpen[1];let t={event_category:o.trackingOpen[2]};o.trackingOpen[3]&&(t.event_label=o.trackingOpen[3]),o.trackingOpen[4]&&(t.value=o.trackingOpen[4]),gtag("event",e,t)}()}function v(){const t=parseInt(o.animation[1]);o.overlay&&e(c).addClass("has-overlay"),o.blockPage&&(e(c).addClass("is-block"),e("html, body").addClass("no-scroll")),e(c).fadeIn(t,(function(){const n=o.animation[0].split(":")[0],i=o.animation[0].split(":"),c={no:()=>e(r).show(0),fade:()=>e(r).fadeIn(t)}[n]||function(){const n=e(r).css("background-color");e(r).css({"background-color":n});const o=w(i);e(r).show(o.type,o.options,t)};f=document.activeElement,setTimeout((()=>{e(r).focus()}),50),e("body").children().each((function(){e(this).find(".modal-window__content").length||e(this).hasClass("modal-window__content")||e(this).attr("inert","")})),c(),y()}))}function b(){let e=1e3*parseInt(o.action[1]);setTimeout((function(){v()}),e)}async function C(){if(!await k())return;!function(){if(!e(a).length)return;if(e(a).removeClass("is-inactive"),!o.floatBtnAnimation[0])return;e(a).addClass(`has-animation ${o.floatBtnAnimation[1]}`),_()}();const t=o.action[0];"load"===t&&b(),"hover"===t&&function(){let t=o.triggers[0],n="#"+t+", ."+t+', a[href$="'+t+'"]';void 0!==o.openSelectors&&""!==o.openSelectors.trim()&&(n+=`, ${o.openSelectors}`),e(n).on("mouseover",(function(t){t.preventDefault(),e(this).attr("href")&&e(u).length&&(m=e(this).attr("href")),v()}))}(),"close"===t&&function(){let t=!1;e(document).on("mouseleave",(function(e){!1===t&&v(),t=!0}))}(),"scroll"===t&&function(){let t=!1;e(document).on("scroll",(function(){let n=e(window).scrollTop(),i=e(document).height(),c=e(window).height();if("px"===o.scrolled[1])e(this).scrollTop()>=o.scrolled[0]&&!1===t&&(b(),t=!0);else{let e=n/(i-c);Math.round(100*e)>=parseInt(o.scrolled[0])&&!1===t&&(b(),t=!0)}}))}(),"rightclick"===t&&e(document).on("contextmenu",(function(e){return e.preventDefault(),b(),!1})),"selectedtext"===t&&e(document).on("mouseup",(function(e){(window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange&&document.selection.createRange().text).toString().length>2&&b()})),function(){const t=o.triggers[0];let n="#"+t+", ."+t+', a[href$="'+t+'"]';void 0!==o.openSelectors&&""!==o.openSelectors.trim()&&(n+=`, ${o.openSelectors}`),e(n).on("click",(function(t){t.preventDefault(),e(this).attr("href")&&e(u).length&&(m=e(this).attr("href")),v()}))}()}function _(){e(a).on("animationend webkitAnimationEnd",(function(t){e(a).removeClass("has-animation"),function(){let t=1e3*parseFloat(o.floatBtnAnimation[4]);setTimeout((function(){e(a).addClass("has-animation"),_()}),t)}()}))}function M(){let t=parseInt(o.animation[3]);const n=o.animation[2].split(":")[0],i=o.animation[2].split(":");e("[inert]").removeAttr("inert"),f&&f.focus();({no:()=>e(r).hide(0,S),fade:()=>e(r).fadeOut(t,S)}[n]||function(){const n=w(i);e(r).hide(n.type,n.options,t,S)})(),function(){if(o.video[0]&&o.video[2]&&h){let t=e(h).attr("src");t=t.split("?")[0],e(h).attr("src",t+"?autoplay=0")}}(),function(){if(o.closeRedirect[0]){let e=o.closeRedirect[1];""!==e&&e.indexOf("http")>-1&&window.open(e,o.closeRedirect[2])}}(),function(){if(!o.trackingClose[0])return!1;if("function"!=typeof window.gtag)return!1;const e=o.trackingClose[1];let t={event_category:o.trackingClose[2]};o.trackingClose[3]&&(t.event_label=o.trackingClose[3]),o.trackingClose[4]&&(t.value=o.trackingClose[4]),gtag("event",e,t)}(),g("close"),u.length&&e(u).html(""),e(a).length&&e(a).removeClass("is-paused")}function S(){let t=parseFloat(o.animation[3]);o.overlay?e(c).fadeOut(t):e(c).fadeOut(0),o.blockPage&&(e(c).removeClass("is-block"),e("html, body").removeClass("no-scroll"))}e(l).length&&e(l).on("wpcf7submit wpformsAjaxSubmitSuccess",p),e(s).length&&e(s).on("submit",(function(t){t.preventDefault();const n=e(this),o=n.attr("id"),i=n.find(".modal-window__form-result"),c=n.serialize();let r={action:"modal_window_form",nonce:ModalWindow.nonce,form_id:o};c.split("&").forEach((function(e){const t=e.split("=");r[decodeURIComponent(t[0])]=decodeURIComponent(t[1])})),e.ajax({type:"POST",url:ModalWindow.ajaxurl,data:r,success:function(t){e(i).html(t),p()},error:function(e,t,n){console.error("Ajax request failed: ",t,n)}})})),!1!==o.hash[0]&&window.addEventListener("hashchange",(function(){C()})),e(i).css(o.style),o.mobile[0]>=d&&e(i).css({"--mw-width":`${o.mobile[1]}${o.mobile[2]}`}),C(),function(){const t=o.triggers[1];let n="#"+t+", ."+t+', a[href$="'+t+'"], #'+o.triggers[2];void 0!==o.closeSelectors&&""!==o.closeSelectors.trim()&&(n+=`, ${o.closeSelectors}`),e(n).on("click",(function(e){e.preventDefault(),M()})),e(r).find(".modal-close-button").on("click",(function(){M()})),e(r).find(".modal-window__close").on("click keydown",(function(e){"click"!==e.type&&"Enter"!==e.key&&" "!==e.key||M()}))}(),o.closeAction[1]&&e(window).on("keydown",(function(e){"Escape"!==e.key&&"Esc"!==e.key||M()})),!0===o.closeAction[0]&&(e(c).addClass("is-clickable"),e(c).on("click",(function(t){e(t.target).closest(".modal-window__content").length||M()})))}))},"undefined"!=typeof ModalWindow)for(var t in ModalWindow)ModalWindow.hasOwnProperty(t)&&"nonce"!==t&&"ajax"!==t&&e("#"+t).ModalWindow(ModalWindow[t])}));